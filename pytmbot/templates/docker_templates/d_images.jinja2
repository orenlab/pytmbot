{# templates/docker_templates/d_images.jinja2 #}

{#
–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —ç–º–æ–¥–∑–∏:
- thought_balloon: üí≠ –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–∞ —Å–ø–∏—Å–∫–∞
- spouting_whale: üê≥ –¥–ª—è Image ID
- package: üì¶ –¥–ª—è –∏–º–µ–Ω–∏ –æ–±—Ä–∞–∑–∞
- bookmark_tabs: üìë –¥–ª—è —Ç–µ–≥–æ–≤
- gear: ‚öôÔ∏è –¥–ª—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- desktop_computer: üñ•Ô∏è –¥–ª—è —Ü–µ–ª–µ–≤–æ–π –û–°
- floppy_disk: üíæ –¥–ª—è —Ä–∞–∑–º–µ—Ä–∞
- clock: üïê –¥–ª—è –¥–∞—Ç—ã —Å–æ–∑–¥–∞–Ω–∏—è
- person_technologist: üë®‚Äçüíª –¥–ª—è –∞–≤—Ç–æ—Ä–∞
- wrench: üîß –¥–ª—è –≤–µ—Ä—Å–∏–∏ Docker
- label: üè∑Ô∏è –¥–ª—è –º–µ—Ç–æ–∫
- electric_plug: üîå –¥–ª—è –ø–æ—Ä—Ç–æ–≤
- key: üîë –¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- arrow_right: ‚û°Ô∏è –¥–ª—è entrypoint
- computer_mouse: üñ±Ô∏è –¥–ª—è –∫–æ–º–∞–Ω–¥—ã
#}

{# –ú–∞–∫—Ä–æ—Å –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª—è —Å –∑–Ω–∞—á–µ–Ω–∏–µ–º #}
{% macro format_field(emoji, label, value, default='N/A', formatter=None) -%}
    {%- if value or default -%}
        {{- emoji }} <b>{{ label }}:</b>
        {%- if formatter == "join" -%}
            {{ value | default(default) | join(", ") }}
        {%- elif formatter == "join_space" -%}
            {{ value | default(default) | join(" ") }}
        {%- elif formatter == "tojson" -%}
            {{ value | default(default) | tojson }}
        {%- else -%}
            {{ value | default(default) }}
        {%- endif -%}
    {%- endif -%}
{%- endmacro %}

{# –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è, –∫–æ—Ç–æ—Ä—ã–µ –≤—Å–µ–≥–¥–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è #}
{% set required_fields = [
    ('spouting_whale', 'Image ID', 'id', None, None),
    ('package', 'Name', 'name', 'N/A', None),
    ('bookmark_tabs', 'Tags', 'tags', ['N/A'], 'join'),
    ('gear', 'OS Architecture', 'architecture', 'N/A', None),
    ('desktop_computer', 'Target OS', 'os', 'N/A', None),
    ('floppy_disk', 'Size', 'size', 'N/A', None),
    ('clock', 'Created', 'created', 'N/A', None)
] %}

{# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–æ–ª—è #}
{% set optional_fields = [
    ('person_technologist', 'Author', 'author', None, None),
    ('wrench', 'Docker Version', 'docker_version', None, None),
    ('label', 'Labels', 'labels', None, 'tojson'),
    ('electric_plug', 'Exposed Ports', 'exposed_ports', None, 'join'),
    ('key', 'Environment Variables', 'env_variables', None, 'join'),
    ('arrow_right', 'Entrypoint', 'entrypoint', None, 'join_space'),
    ('computer_mouse', 'Command', 'cmd', None, 'join_space')
] %}

{{ emojis.thought_balloon }} Here are the images:

{% for value in context.images %}
    {# –í—ã–≤–æ–¥ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π #}
    {% for emoji_key, label, field_key, default_value, formatter in required_fields %}
        {{ format_field(emojis[emoji_key], label, value.get(field_key), default_value, formatter) }}
    {% endfor %}

    {# –í—ã–≤–æ–¥ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π #}
    {% for emoji_key, label, field_key, default_value, formatter in optional_fields %}
        {%- if value.get(field_key) -%}
            {{ format_field(emojis[emoji_key], label, value[field_key], default_value, formatter) }}
        {%- endif -%}
    {% endfor %}
{% else %}
    <b>No images available.</b>
{% endfor %}